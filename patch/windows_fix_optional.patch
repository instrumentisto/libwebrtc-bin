diff --git a/src/third_party/perfetto/include/perfetto/tracing/track.h b/src/third_party/perfetto/include/perfetto/tracing/track.h
index dcaaf3a0d1..3b06516011 100644
--- a/src/third_party/perfetto/include/perfetto/tracing/track.h
+++ b/src/third_party/perfetto/include/perfetto/tracing/track.h
@@ -33,6 +33,7 @@
 #include <stdint.h>
 #include <map>
 #include <mutex>
+#include <optional>
 
 namespace perfetto {
 namespace internal {
--- a/src/third_party/perfetto/include/perfetto/tracing/internal/track_event_internal.h
+++ b/src/third_party/perfetto/include/perfetto/tracing/internal/track_event_internal.h
@@ -29,6 +29,7 @@
 #include "protos/perfetto/trace/interned_data/interned_data.pbzero.h"
 #include "protos/perfetto/trace/track_event/track_event.pbzero.h"
 
+#include <optional>
 #include <unordered_map>
 
 namespace perfetto {
